$(document).o(function(){var o=document.t("needs-validation");Array.prototype.filter.call(o,function(o){o.e("submit",function(n){n.s(),n.n(),o.r.add("was-validated"),!0===o.i()&&function(){$(this).a("d-none"),$("#btn-sending").a("d-none"),$("#container-alerts").l();var o=null,n=$("#select-group option:selected").u(),r=$("#select-group option:selected").c("name"),i=$("#select-group option:selected").c("members"),a=$("#select-group option:selected").c("members-short"),l=$("#textarea-solution").u(),u=$("#input-cost").u();switch(parseInt($("#select-instance option:selected").u())){case 1:o="tsp1";break;case 2:o="tsp2";break;case 3:o="tsp3"}if(null==o)e("Alguma coisa saiu errado! Por favor, comunique o erro ao professor informando o código de erro.",1,60,10);else{var c=function(o,n,r){var i={d:!1,m:null,f:null};solution=n.replace(/\s+/g,"").trim().split(",");for(var a=0;a<solution.length;a++)if(solution[a]=parseInt(solution[a]),isNaN(solution[a]))return e("A solução informada não está no formato correto! Leia as instruções acima para descobrir como formatar sua solução.",1,15,null),s(),i;i.f=solution.join(",");var l=function(o){var t={v:0,p:null};return $.b({$:"/assets/tsp-cup/instances/"+o+".txt",g:!1,d:function(o){for(var e=o.split("\n"),s=0;s!=e.length;){if("#num_vertices"==e[s]){s++,t.v=parseInt(e[s]);break}s++}for(;s!=e.length;){if("#coordinates"==e[s]){s++;break}s++}t.p=new Array(t.v);for(var n=0;n<t.v;n++){var r=e[s].replace(/\s+/g," ").trim().split(" ");t.p[n]=new Array(2),t.p[n][0]=r[1],t.p[n][1]=r[2],s++}}}),t}(o);if(solution.length!=l.v+1)return e("O número de clientes na rota não condiz com o esperado para a instância escolhida! Deveriam haver <strong>"+(l.v+1)+" vértices </strong>. Leia as instruções acima para descobrir como formatar sua solução.",1,15,null),s(),i;if(solution[0]!=solution[solution.length-1])return e("Solução inviável, o primeiro vértice deve ser igual ao último!",1,15,null),s(),i;for(var u=new Array(l.v).fill(!1),a=0;a<solution.length-1;a++){if(solution[a]>=l.v||solution[a]<0)return e("Solução inviável, o cliente "+solution[a]+" não existe!",1,15,null),s(),i;if(u[solution[a]])return e("Solução inviável, o cliente "+solution[a]+" é visitado mais de uma vez!",1,15,null),s(),i;u[solution[a]]=!0}for(var c=0,a=0;a<solution.length-1;a++){var d=l.p[solution[a]][0],m=l.p[solution[a]][1],f=l.p[solution[a+1]][0],v=l.p[solution[a+1]][1];c+=t(d,m,f,v)}c!=r&&e("A solução informada possui valor <strong>"+c+"</strong>, mas foi informado "+r+". Note que iremos considerar o valor correto, mas isso pode indicar um bug em seu código.",2,15,null);return i.d=!0,i.m=c,$("#textarea-solution")._("is-invalid"),i}(o,l,u);if(c.d&&$("#alert-successfully-sent").h("d-none")){$("#alert-successfully-sent")._("d-none"),setTimeout(function(){$("#alert-successfully-sent").y("d-none")},1e4);var d='<strong>Solution:</strong><br>{<br>\t"solution": {<br>\t\t"instance_name": "'+o+'",<br>\t\t"group_id": '+n+',<br>\t\t"group_name": "'+r+'",<br>\t\t"group_members": "'+i+'",<br>\t\t"group_members_short": "'+a+'",<br>\t\t"time_stamp": "'+moment().w()+'",<br>\t\t"solution_cost_user": '+u+',<br>\t\t"solution_cost_evaluated": '+c.m+',<br>\t\t"solution_user": "'+l+'",<br>\t\t"solution": "'+c.f+'"<br>\t}<br>}';$("#input-email-msg").u(d),$("#input-email-title").u("[TSP CUP] Grupo "+n),$("#form-test").A()}}$(this).a("d-none"),$("#btn-sending").a("d-none")}()},!1)});function t(o,t,e,s){return Math.ceil(Math.sqrt(Math.pow(o-e,2)+Math.pow(t-s,2)))}function e(o,t,e,s){var n=$('<div class="alert alert-'+(1==t?"danger":"warning")+' alert-dismissible fade show" role="alert"></div>').x("<strong>"+(1==t?"Erro":"Aviso")+(null!=s?" "+s:"")+":</strong> "+o).x('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');$("#container-alerts").x(n),setTimeout(function(){n.k()},1e3*e)}function s(){$("#form-tsp-cup-submit")._("was-validated"),$("#textarea-solution").h("is-invalid")||$("#textarea-solution").y("is-invalid")._("is-valid")}$("#alert-successfully-sent .close").S("click",function(o){return o.s(),$("#alert-successfully-sent").h("d-none")||$("#alert-successfully-sent").y("d-none"),!1})});